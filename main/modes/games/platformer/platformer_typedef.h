#ifndef PLATFORMER_COMMON_TYPEDEF_INCLUDED
#define PLATFORMER_COMMON_TYPEDEF_INCLUDED

//==============================================================================
// Constants
//==============================================================================

#define SUBPIXEL_RESOLUTION        4
#define PL_TILESIZE_IN_POWERS_OF_2 4
#define PL_TILESIZE                16
#define PL_HALF_TILESIZE           8
#define DESPAWN_THRESHOLD          64

//==============================================================================
// Macros
//==============================================================================

#define SIGNOF(x)           ((x > 0) - (x < 0))
#define PL_TO_TILECOORDS(x) ((x) >> PL_TILESIZE_IN_POWERS_OF_2)
#define TO_PIXEL_COORDS(x) ((x) >> SUBPIXEL_RESOLUTION)
#define TO_SUBPIXEL_COORDS(x) ((x) << SUBPIXEL_RESOLUTION)

typedef struct platformer_t platformer_t;
typedef struct plEntityManager_t plEntityManager_t;
typedef struct plTilemap_t plTilemap_t;
typedef struct plEntity_t plEntity_t;

typedef enum
{
    PL_ST_NULL,
    PL_ST_TITLE_SCREEN,
    PL_ST_READY_SCREEN,
    PL_ST_GAME,
    PL_ST_DEAD,
    PL_ST_LEVEL_CLEAR,
    PL_ST_WORLD_CLEAR,
    PL_ST_GAME_CLEAR,
    PL_ST_GAME_OVER,
    PL_ST_HIGH_SCORE_ENTRY,
    PL_ST_HIGH_SCORE_TABLE,
    PL_ST_PAUSE
} pl_gameStateEnum_t;

typedef enum
{
    PL_BGM_NO_CHANGE,
    PL_BGM_MAIN,
    PL_BGM_ATHLETIC,
    PL_BGM_UNDERGROUND,
    PL_BGM_FORTRESS,
    PL_BGM_NULL
} pl_bgmEnum_t;

typedef enum
{
    PL_SP_PLAYER_IDLE,
    PL_SP_PLAYER_WALK1,
    PL_SP_PLAYER_WALK2,
    PL_SP_PLAYER_WALK3,
    PL_SP_PLAYER_JUMP,
    PL_SP_PLAYER_SLIDE,
    PL_SP_PLAYER_HURT,
    PL_SP_PLAYER_CLIMB,
    PL_SP_PLAYER_WIN,
    PL_SP_ENEMY_BASIC,
    PL_SP_HITBLOCK_CONTAINER,
    PL_SP_HITBLOCK_BRICKS,
    PL_SP_DUSTBUNNY_IDLE,
    PL_SP_DUSTBUNNY_CHARGE,
    PL_SP_DUSTBUNNY_JUMP,
    PL_SP_GAMING_1,
    PL_SP_GAMING_2,
    PL_SP_GAMING_3,
    PL_SP_MUSIC_1,
    PL_SP_MUSIC_2,
    PL_SP_MUSIC_3,
    PL_SP_WARP_1,
    PL_SP_WARP_2,
    PL_SP_WARP_3,
    PL_SP_WASP_1,
    PL_SP_WASP_2,
    PL_SP_WASP_DIVE,
    PL_SP_1UP_1,
    PL_SP_1UP_2,
    PL_SP_1UP_3,
    PL_SP_WAVEBALL_1,
    PL_SP_WAVEBALL_2,
    PL_SP_WAVEBALL_3,
    PL_SP_ENEMY_BUSH_L2,
    PL_SP_ENEMY_BUSH_L3,
    PL_SP_DUSTBUNNY_L2_IDLE,
    PL_SP_DUSTBUNNY_L2_CHARGE,
    PL_SP_DUSTBUNNY_L2_JUMP,
    PL_SP_DUSTBUNNY_L3_IDLE,
    PL_SP_DUSTBUNNY_L3_CHARGE,
    PL_SP_DUSTBUNNY_L3_JUMP,
    PL_SP_WASP_L2_1,
    PL_SP_WASP_L2_2,
    PL_SP_WASP_L2_DIVE,
    PL_SP_WASP_L3_1,
    PL_SP_WASP_L3_2,
    PL_SP_WASP_L3_DIVE,
    PL_SP_CHECKPOINT_INACTIVE,
    PL_SP_CHECKPOINT_ACTIVE_1,
    PL_SP_CHECKPOINT_ACTIVE_2,
    PL_SP_BOUNCE_BLOCK
} pl_spriteDef_t;

typedef enum
{
    PL_TILEEMPTY,
    PL_TILEWARP_0,
    PL_TILEWARP_1,
    PL_TILEWARP_2,
    PL_TILEWARP_3,
    PL_TILEWARP_4,
    PL_TILEWARP_5,
    PL_TILEWARP_6,
    PL_TILEWARP_7,
    PL_TILEWARP_8,
    PL_TILEWARP_9,
    PL_TILEWARP_A,
    PL_TILEWARP_B,
    PL_TILEWARP_C,
    PL_TILEWARP_D,
    PL_TILEWARP_E,
    PL_TILEWARP_F,
    PL_TILECTNR_COIN,
    PL_TILECTNR_10COIN,
    PL_TILECTNR_POW1,
    PL_TILECTNR_POW2,
    PL_TILECTNR_LADDER,
    PL_TILECTNR_1UP,
    PL_TILECTRL_LEFT,
    PL_TILECTRL_RIGHT,
    PL_TILECTRL_UP,
    PL_TILECTRL_DOWN,
    PL_TILEUNUSED_27,
    PL_TILEUNUSED_28,
    PL_TILEUNUSED_29,
    PL_TILEINVISIBLE_BLOCK,
    PL_TILEINVISIBLE_CONTAINER,
    PL_TILEGRASS,
    PL_TILEGROUND,
    PL_TILEBRICK_BLOCK,
    PL_TILEBLOCK,
    PL_TILEMETAL_BLOCK,
    PL_TILEMETAL_PIPE_H,
    PL_TILEMETAL_PIPE_V,
    PL_TILEBOUNCE_BLOCK,
    PL_TILEDIRT_PATH,
    PL_TILEGIRDER,
    PL_TILESOLID_UNUSED_42,
    PL_TILESOLID_UNUSED_43,
    PL_TILESOLID_UNUSED_44,
    PL_TILESOLID_UNUSED_45,
    PL_TILESOLID_UNUSED_46,
    PL_TILESOLID_UNUSED_47,
    PL_TILESOLID_UNUSED_48,
    PL_TILESOLID_UNUSED_49,
    PL_TILESOLID_UNUSED_50,
    PL_TILESOLID_UNUSED_51,
    PL_TILESOLID_UNUSED_52,
    PL_TILESOLID_UNUSED_53,
    PL_TILESOLID_UNUSED_54,
    PL_TILESOLID_UNUSED_55,
    PL_TILESOLID_UNUSED_56,
    PL_TILESOLID_UNUSED_57,
    PL_TILESOLID_UNUSED_58,
    PL_TILEGOAL_100PTS,
    PL_TILEGOAL_500PTS,
    PL_TILEGOAL_1000PTS,
    PL_TILEGOAL_2000PTS,
    PL_TILEGOAL_5000PTS,
    PL_TILECONTAINER_1,
    PL_TILECONTAINER_2,
    PL_TILECONTAINER_3,
    PL_TILECOIN_1,
    PL_TILECOIN_2,
    PL_TILECOIN_3,
    PL_TILELADDER,
    PL_TILENONSOLID_INTERACTIVE_VISIBLE_71,
    PL_TILENONSOLID_INTERACTIVE_VISIBLE_72,
    PL_TILENONSOLID_INTERACTIVE_VISIBLE_73,
    PL_TILENONSOLID_INTERACTIVE_VISIBLE_74,
    PL_TILENONSOLID_INTERACTIVE_VISIBLE_75,
    PL_TILENONSOLID_INTERACTIVE_VISIBLE_76,
    PL_TILENONSOLID_INTERACTIVE_VISIBLE_77,
    PL_TILENONSOLID_INTERACTIVE_VISIBLE_78,
    PL_TILENONSOLID_INTERACTIVE_VISIBLE_79,
    PL_TILEBG_GOAL_ZONE,
    PL_TILEBG_ARROW_L,
    PL_TILEBG_ARROW_R,
    PL_TILEBG_ARROW_U,
    PL_TILEBG_ARROW_D,
    PL_TILEBG_ARROW_LU,
    PL_TILEBG_ARROW_RU,
    PL_TILEBG_ARROW_LD,
    PL_TILEBG_ARROW_RD,
    PL_TILEBG_CLOUD_LD,
    PL_TILEBG_CLOUD_M,
    PL_TILEBG_CLOUD_RD,
    PL_TILEBG_CLOUD_LU,
    PL_TILEBG_CLOUD_RU,
    PL_TILEBG_CLOUD_D,
    PL_TILEBG_CLOUD,
    PL_TILEBG_TALL_GRASS,
    PL_TILEBG_MOUNTAIN_L,
    PL_TILEBG_MOUNTAIN_U,
    PL_TILEBG_MOUNTAIN_R,
    PL_TILEBG_MOUNTAIN,
    PL_TILEBG_METAL,
    PL_TILEBG_CHAINS,
    PL_TILEBG_WALL
} pl_tileIndex_t;

typedef enum {
    PL_WSG_PLAYER_IDLE,
    PL_WSG_PLAYER_WALK1,
    PL_WSG_PLAYER_WALK2,
    PL_WSG_PLAYER_WALK3,
    PL_WSG_PLAYER_JUMP,
    PL_WSG_PLAYER_SLIDE,
    PL_WSG_PLAYER_HURT,
    PL_WSG_PLAYER_CLIMB,
    PL_WSG_PLAYER_WIN,
    PL_WSG_ENEMY_BASIC,
    PL_WSG_DUSTBUNNY_IDLE,
    PL_WSG_DUSTBUNNY_CHARGE,
    PL_WSG_DUSTBUNNY_JUMP,
    PL_WSG_GAMING_1,
    PL_WSG_GAMING_2,
    PL_WSG_GAMING_3,
    PL_WSG_MUSIC_1,
    PL_WSG_MUSIC_2,
    PL_WSG_MUSIC_3,
    PL_WSG_WARP_1,
    PL_WSG_WARP_2,
    PL_WSG_WARP_3,
    PL_WSG_WAPL_WSG_1,
    PL_WSG_WAPL_WSG_2,
    PL_WSG_WAPL_WSG_DIVE,
    PL_WSG_1UP_1,
    PL_WSG_1UP_2,
    PL_WSG_1UP_3,
    PL_WSG_WAVEBALL_1,
    PL_WSG_WAVEBALL_2,
    PL_WSG_WAVEBALL_3,
    PL_WSG_ENEMY_BUSH_L2,
    PL_WSG_ENEMY_BUSH_L3,
    PL_WSG_DUSTBUNNY_L2_IDLE,
    PL_WSG_DUSTBUNNY_L2_CHARGE,
    PL_WSG_DUSTBUNNY_L2_JUMP,
    PL_WSG_DUSTBUNNY_L3_IDLE,
    PL_WSG_DUSTBUNNY_L3_CHARGE,
    PL_WSG_DUSTBUNNY_L3_JUMP,
    PL_WSG_WAPL_WSG_L2_1,
    PL_WSG_WAPL_WSG_L2_2,
    PL_WSG_WAPL_WSG_L2_DIVE,
    PL_WSG_WAPL_WSG_L3_1,
    PL_WSG_WAPL_WSG_L3_2,
    PL_WSG_WAPL_WSG_L3_DIVE,
    PL_WSG_CHECKPOINT_INACTIVE,
    PL_WSG_CHECKPOINT_ACTIVE_1,
    PL_WSG_CHECKPOINT_ACTIVE_2,

    PL_WSG_GRASS,
    PL_WSG_GROUND,
    PL_WSG_BRICK_BLOCK,
    PL_WSG_BLOCK,
    PL_WSG_METAL_BLOCK,
    PL_WSG_METAL_PIPE_H,
    PL_WSG_METAL_PIPE_V,
    PL_WSG_BOUNCE_BLOCK,
    PL_WSG_DIRT_PATH,
    PL_WSG_GIRDER,
    PL_WSG_GOAL_100PTS,
    PL_WSG_GOAL_500PTS,
    PL_WSG_GOAL_1000PTS,
    PL_WSG_GOAL_2000PTS,
    PL_WSG_GOAL_5000PTS,
    PL_WSG_CONTAINER_1,
    PL_WSG_CONTAINER_2,
    PL_WSG_CONTAINER_3,
    PL_WSG_COIN_1,
    PL_WSG_COIN_2,
    PL_WSG_COIN_3,
    PL_WSG_LADDER,
    PL_WSG_BG_GOAL_ZONE,
    PL_WSG_BG_ARROW_L,
    PL_WSG_BG_ARROW_R,
    PL_WSG_BG_ARROW_U,
    PL_WSG_BG_ARROW_D,
    PL_WSG_BG_ARROW_LU,
    PL_WSG_BG_ARROW_RU,
    PL_WSG_BG_ARROW_LD,
    PL_WSG_BG_ARROW_RD,
    PL_WSG_BG_CLOUD_LD,
    PL_WSG_BG_CLOUD_M,
    PL_WSG_BG_CLOUD_RD,
    PL_WSG_BG_CLOUD_LU,
    PL_WSG_BG_CLOUD_RU,
    PL_WSG_BG_CLOUD_D,
    PL_WSG_BG_CLOUD,
    PL_WSG_BG_TALL_GRASS,
    PL_WSG_BG_MOUNTAIN_L,
    PL_WSG_BG_MOUNTAIN_U,
    PL_WSG_BG_MOUNTAIN_R,
    PL_WSG_BG_MOUNTAIN,
    PL_WSG_BG_METAL,
    PL_WSG_BG_CHAINS,
    PL_WSG_BG_WALL
} pl_wsgIndex_t

#endif