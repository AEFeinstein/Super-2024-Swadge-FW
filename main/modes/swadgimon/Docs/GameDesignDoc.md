# Swadgimon

Pokemon, for the people! A homage to the pokemon games (legally distinct though) based on MAGFest and the Gaylord National Harbor Hotel where the event is held.

#### Other name ideas:
- Swadgemon
- SwadgeWorld
- Pokeswadge
- PokeMAG
- MAGimon
- MAGmon
- Pokemon but legally distinct and better because it’s something WE created and it’s themed after our favorite festival that happens every year in National Harbor in January, yeah near DC, no it’s not in DC, no not MAGAfest, that’s Music And Gaming, just MAG with no A at the end, no this has nothing to do with magnets either
- Lanyard Monsters (Lanyamon)

## Versions

There are four versions of this game:
- Minimum Viable Product: The basics of the basics. Functional, but not what we wanted
- Level 1: Some stretch goals added in. Goal for 2025.
- Level 2: Expected output for the 2026 swadge
- Out-Of-Scope: The functions required for 1-1 equavalent with Gen III mechanics Not to be included unless someone has too much spare time.

### MVP

- Theme
    - Moves, pokemon, items, etc have minimal updates, reskins and not actually something unique
    - Minimal MAG stylization on top
- Scope
    - Map
        - Hotel
            - Atrium
            - Ballrooms
            - Resturuants
        - Convetion center
            - Potomac
            - Maryland
            - Prefunction space
    - 1-2 Gyms
    - 2-3 Boss trainers
    - 25 monsters
    - 1-2 Legendaries
    - 1 mythic Pokemon
    - 2-3 starters
- Balance
    - All core stats
    - Pokemon, types, moves, etc are copied from Gen III to require minimal balancing
    - Add in EXP increasing items, boost EXP gain, something to reduce the grind
        - Or a low level cap. Not idea, but minimal testing
- Audio
    - Basic buzzes for menuing, actions
    - Basic buzzes for attacks
    - A single theme for overworld
    - A single theme for battle
- Mechanics
    - Wild areas with monsters
        - different areas have different spawn groups
    - Turn based battles
    - Swadgidex
        - Track seen/caught monsters
        - Display wild area fro each monster
    - Later areas have harder wild mons/trainers
    - Shops (1 per area)
    - Character customization
        - Pronouns
        - Gender
        - Name
        - Sprites
    - HMs to teach moves outside of leveling up
    - Adequate pool of moves
    - PC for managing mons
- Graphics
    - Gen II style
        - 2D sprites
        - 4 colors per
    - Front, back and dex sprites for each mon

### Level 1

Includes everything in MVP, plus:

- Theme
    - Pokemon get an overhaul, with new movesets made of original moves.
    - More styling
    - New types that are just reskins
    - New items
- Scope
    - Add in more of the building as part of the map.
        - Convention 
            - Expo halls
            - Chesapeake
            - National Harbor rooms
            - Employee halls (Liminal/non-euclidian)
        - Hotel
            - Panel rooms
            - Makerspace
            - Spa
            - Hotel rooms (Multiple floors?)
        - Riverview
        - Limited Exterior
        - Farawaay land
            Small section of half-underwater mark center
    - 3-4 Gyms
    - 3-5 Boss trainers
    - 50-75 monsters
    - 14 Legendaries
    - 1 mythic Pokemon
    - 3 starters
- Balancing
    - Improve the grind by reducing rarity
    - Add way to get rare mons outside of walking back and forth in grass (Events?)
    - Increase shiny chances
- Audio
    - More sounds, unique for actions like menuing instead of just buzzes
    - A BGM track for each discrete area in addition to the main theme
- Mechanics
    - Levels
        - More wild areas
        - Tall grass or analogue
        - Fishing in the fountain
        - Story progression gates, higher level area have better items
    - Swadgidex Lore: Snippits about each Mon
    - Character customization
        - Free entry pronouns
        - Free entry Gender
    - Mon nickname changing
    - Multiplayer
        - Loaner mons so it can be jumped into, no need to single player grind
        - Rewards for online combat as banked for a single player profile
        - Trading
        - Battling
    - Profanity filter for multiplayer field where text can be freely typed
    - Step counter
        - Gives items, money, exp rewards
    - Move relearner 
    - Move tutors
    - TMs, HMs, TRs,
        - TMs and HMs are infinite use
        - TRs are single use
        - All TRs have a HM/TM counterpart
- Graphics
    - Gen III style
        - GUI based PC instead of generic list
        - Bag with catergory tabs
    - Shiny Front, back and dex sprites for each mon 
    - Move animations

### Level 2

Includes everything in MVP and Level 1, plus:

- Theme
    - Add in more unique items and sight gags
- Scope
    - Map
        - National Harbor, include the local area around the hotel
        - 8 full gyms
        - Lots of NPCs
    - A full roster of custom Mons
    - A full set of custom moves
    - A full story with plot twists and stuff
    - More types!
- Balancing
    - Have a bunch of play testing to balance the custom stuff
- Audio
    - Entire list of custom BGM tracks
    - Every Mon has a unique cry
- Mechanics
    - Character customization
        - Cosmetics
        - Complete Trainer overhaul (Keep TID and SID, no reason to regenerate)
    - Customizable Secret bases
    - Multiplayer
        - Friend's lists
        - Social media links
        - "Street pass"
            - Spread cosmetics
            - Spread items
            - Share trainer info, add as friends
            - Social media links?
        - Raids like Pokemon GO
            - Contribute to monster raid
            - Cosmetics and rare monsters can drop
            - Central server to coordinate events
    - Different versions
        - Version exclusing mons!
    - Rewards can be earned by playing other swadge games
        

### Out-Of-Scope (Currently)

- Breeding mechanics
- Held items
- Battle cinematics
- Battle frontier
- Battle pass
- Bottlecapping IVs
- 3D monster models
- 3D world

## Core cameplay loop

1. Get a new pokemon
2. Raise that pokemon via battles and items
3. Win difficult battles to be able to explore new areas
4. New areas contain new pokemon

## Theme

MAGFest
- Cosplayers
- Gaming Icons
- Notable people
- Notable in-jokes (Devito, the roar, etc)
- Zones based on areas (Panels, Gazebo, Fountain, Rooms, etc.)
- Mons based on past characters (Like the metroid blob thing)

## Visuals

Visuals should be in-line with Gen II Pokemon games. See the srceenshots below for some examples of combat, overworld, menues, etc.

 A list of requires assest can be found [here](Asset lists\ImageAssets.csv)

![Overworld](images/overworld.jpg)

![Battle](images/Battle.bmp)

![Battle Start](images/BattleStart.bmp)

## Sounds

Various sound effects need to be created. 

BGMs for each area, Cries for each pokemon, UI beeps and bloops, capturing pokemon, etc.

 A list of requires assest can be found [here](Asset lists\AudioAssets.csv)

[Example music](https://www.youtube.com/watch?v=nU263Ud3LM4&list=PL7B00075B92623D5D)

## Mechanics

The mechanics of the game are based on Gen III Pokemon games. As many mechincs that can be added should be added.

### Overworld

The overworld is an explorable environment that provides a lot of the context for the game. It should allow the player to slowly level up as they play and not smash them headfirst into impossible battles.

#### World

The world map is split into several zones, each with their own theme, music, etc. The map is split into a grid, and each grid space has a few values associated with it.

- Tile: One of 127 tiles (7 bit value)
- Tags: Water, Passable, Interactable, TallGrass, Door, On top of player, Transparant, Event, Ledge (9 bit value)
- InteractableID: ID of interactable object 16 bits, we're going to need more than 256.
- SpawnGroup: ID of spawngroup (8 bits)
- NewMap: New map to load if a door (6 bits)
- NewLoc: Location on new map (To account for multiple entrances) (2 bits)
- Event: If an event can happen, Event ID is store here (16 bits)

Each grid space will take up to 64 bits of data to store. Might be able to bitpack better once we determine number of zones, doors, interactables, etc. Also, we might be able to double use some things, like spawning areas may never have interactable items so those can overlap.

##### Interactables

Some impassable grid spaces are interactable. When an interaction is triggered (Pressing A when facing), the ID is checked and the associated action is called.

Examples:
- Dialogue: Signs, Pokemon, People. Dialogue can be multiple pages, A advances, B retreats
- Items: Pick up and add to inventory
- Traversal options: E.G. Swimming across water requires inteacting with a body of water
- Use Moves in overworld: Flash, Cut, etc.
- Shops: Bring up a store menu

##### Spawngroup

Spawngroups are small data structures containing a list of spawnable pokemon and what level they can spawn at

- ID: How a grid space references this item
- List of Spawnable pokemon IDs
- Level range (two 8 bit numbers) per spawnable pokemon

#### NPCs

NPCs are objects that block a grid space and can have pokemon, dialogue, etc.

- Movement (Still, spinning, movement pattern, random (confined to an area))
- Pokemon (0-6, if have none cannot initiate battle)
- Sprites (Overworld sprites, battle sprites)
- Entrance/lose/talk again dialogue 
- Attack patterns (How they pick moves for their pokemon)
- Money earned by defeating their pokemon

#### Story State 

The story state is a array of flags used to determine where the player is in the story. Grid tiles are checked when player steps on them or interacts, and those trigger flags.

Examples:
- Lock and key: snorlax with the flute
- Critical Dialogue
- Critical battles
- World changes: Ship leaving port, bridge breaking

#### Cutsceens

Player controls are largely stripped, and a scripted set of things can occur:
- Dialogue can spawn
- All NPCs, Player, and any Items can be moved
- A battle can be initiates.

### Menus

#### Swadgidex

Displays Species information for encountered and caught pokemon, shows slot for all unencounted pokemon to incentivize collecting.

#### Item Bag

Items can be used in battle or outside of battle, depending on the item. They are stored in an item bag. Some items can be held by Pokemon.

Different items go into different "pockets" so you can't run out of room for healing items by buying too many pokeballs.

Player also has a wallet.

#### Battle Order

Pokemon can be swapped around to determine what order they come in when starting, or when one faints.

#### Pokemon storage

Pokemon not in the player's party are sent to a storage PC.

#### Store menus

Store allow you to buy items. Inventory is controlled by inventory lists. Player must have the required money to buy items. Items can be batch-purchased.

### Pokemon

Pokemon are ther individual creatures caught and used to battle and navigate the environment.

#### Data structure

- Species
- Level
- 6 EVs
- 6 IVs
- Nature
- Move list (Up to 4)
- Nickname
- Gender
- EXP
- Pokeball used to capture
- Original trainer
- Personality value
- Pokerus Strain
- Pokerus Immunity timer
- Non-Volitile status
- Volitile status (In combat, can be multiple)
- Transient status (In combat)

#### Personality value

This randomly generated 32 bit number determins a few attributes of a Pokemon:
- Gender (Lowest 8 bits)
- Ability: If two abilities are available, use the 1 place bit to pick
- Nature: Mod 25 of the entire number
- Shinyness: See [Shinies](#shinies)
- Size and weight: See [Personality value](https://m.bulbapedia.bulbagarden.net/wiki/Personality_value)

#### Species

Each Pokemon species has a few stats attached to them:
- Index
- Catch rate
- Base Experence yield
- EV yield (value and stat)
- Leveling rate
- Type 1
- Type 2
- Abilities
- Gender possibilities (Male, Female, Does not apply, etc.)
- Gender Ratio
- Height
- Weight
- Sprite (Facing)
- Sprite (Back)
- Sprite (Pokedex)
- Shiny Sprite (Facing)
- Shiny Sprite (Back)
- Shiny Sprite (Pokedex)
- Pokemon cries
- Egg group 1
- Egg group 2
- Status immunities

#### Stats

There are six main stats:
- HP
- Attack
- Defense
- Special Attack
- Special Defense
- Speed

The formula for determining each of these is as follows:  
`HP = (2 * Base + IV + (EV/4)) * Level/100`
- Base: Pokemon Species base HP
- IV: See IVs below
- EV: See EVs below
- Level: Level of the pokemon

`All other stats = ((((2 * Base + IV + (EV/4)) * Level) / 100) + 5) * Nature`
- Base: Pokemon Species base stat
- IV: See IVs below
- EV: See EVs below
- Level: Pokemon's level
- Nature: See natures below

##### IVs

Each stat is assigned a random IV at creation. The number varies from 0-31.

##### EVs

EVs are effort values. When an opposing pokemon faints, they give between 1-3 EV of a specific stat. The stat and value is based on species.

EVs have two hard caps:
- Individual: Highest any particular EV can go is 255
- Combined: The total of all EVs can only add up to 510

##### Natures

Natures are decided at creation. They have a positive trait and negative trait. There are 25 traits, but 5 of them cancel themselves out. Stats are increased or decreased by 10%

| Index | Nature | Increased Stat | Decreased Stat |
| ----- | ------ | -------------- | -------------- |
| 0  | Hardy    | Attack      | Attack      |
| 1  | Lonely   | Attack      | Defense     |
| 2  | Brave    | Attack      | Speed       |
| 3  | Adamant  | Attack      | Sp. Attack  |
| 4  | Naughty  | Attack      | Sp. Defense |
| 5  | Bold     | Defense     | Attack      |
| 6  | Docile   | Defense     | Defense     |
| 7  | Relaxed  | Defense     | Speed       |
| 8  | Impish   | Defense     | Sp. Attack  |
| 9  | Lax      | Defense     | Sp. Defense |
| 10 | Timid    | Speed       | Attack      |
| 11 | Hasty    | Speed       | Defense     |
| 12 | Serious  | Speed       | Speed       |
| 13 | Jolly    | Speed       | Sp. Attack  |
| 14 | Naive    | Speed       | Sp. Defense |
| 15 | Modest   | Sp. Attack  | Attack      |
| 16 | Mild     | Sp. Attack  | Defense     |
| 17 | Quiet    | Sp. Attack  | Speed       |
| 18 | Bashful  | Sp. Attack  | Sp. Attack  |
| 19 | Rash     | Sp. Attack  | Sp. Defense |
| 20 | Calm     | Sp. Defense | Attack      |
| 21 | Gentle   | Sp. Defense | Defense     |
| 22 | Sassy    | Sp. Defense | Speed       |
| 23 | Careful  | Sp. Defense | Sp. Attack  |
| 24 | Quirky   | Sp. Defense | Sp. Defense |

#### Types

Types determine the STAB bonus, as well as which moves do more or less damage, or even which moves a pokemon is immune from. Pokemone have 1 or 2 types, depending on species.

Overall chart
| Attacking \ Defending | Normal | Figthing | Flying | Poison | Ground | Rock | Bug | Ghost | Steel | Fire | Water | Grass | Electric | Psychic | Ice | Dragon | Dark |
| --------------------- | ------ | -------- | ------ | ------ | ------ | ---- | --- | ----- | ----- | ---- | ----- | ----- | -------- | ------- | --- | ------ | ---- |
| Normal                | 1      | 1        | 1      | 1      | 1      | 0.5  | 1   | 0     | 0.5   | 1    | 1     | 1     | 1        | 1       | 1   | 1      | 1    |
| Fighting              | 2      | 1        | 0.5    | 0.5    | 1      | 2    | 0.5 | 0     | 2     | 1    | 1     | 1     | 1        | 0.5     | 2   | 1      | 2    |
| Flying                | 1      | 2        | 1      | 1      | 1      | 0.5  | 2   | 1     | 0.5   | 1    | 1     | 2     | 0.5      | 1       | 1   | 1      | 1    |
| Poison                | 1      | 1        | 1      | 0.5    | 0.5    | 0.5  | 1   | 0.5   | 0     | 1    | 1     | 2     | 1        | 1       | 1   | 1      | 1    |
| Ground                | 1      | 1        | 0      | 2      | 1      | 2    | 0.5 | 1     | 2     | 2    | 1     | 0.5   | 2        | 1       | 1   | 1      | 1    |
| Rock                  | 1      | 0.5      | 2      | 1      | 0.5    | 1    | 2   | 1     | 0.5   | 2    | 1     | 1     | 1        | 1       | 2   | 1      | 1    |
| Bug                   | 1      | 0.5      | 0.5    | 0.5    | 1      | 1    | 1   | 0.5   | 0.5   | 0.5  | 1     | 2     | 1        | 2       | 1   | 1      | 2    |
| Ghost                 | 0      | 1        | 1      | 1      | 1      | 1    | 1   | 2     | 0.5   | 1    | 1     | 1     | 1        | 2       | 1   | 1      | 0.5  |
| Steel                 | 1      | 1        | 1      | 1      | 1      | 2    | 1   | 1     | 0.5   | 0.5  | 0.5   | 1     | 0.5      | 1       | 2   | 1      | 1    |
| Fire                  | 1      | 1        | 1      | 1      | 1      | 0.5  | 2   | 0     | 2     | 0.5  | 0.5   | 2     | 1        | 1       | 2   | 0.5    | 1    |
| Water                 | 1      | 1        | 1      | 1      | 2      | 2    | 1   | 0     | 1     | 2    | 0.5   | 0.5   | 1        | 1       | 1   | 0.5    | 1    |
| Grass                 | 1      | 1        | 0.5    | 0.5    | 2      | 2    | 0.5 | 0     | 0.5   | 0.5  | 2     | 0.5   | 1        | 1       | 1   | 0.5    | 1    |
| Electric              | 1      | 1        | 2      | 1      | 0      | 1    | 1   | 0     | 1     | 1    | 2     | 0.5   | 0.5      | 1       | 1   | 0.5    | 1    |
| Psychic               | 1      | 2        | 1      | 2      | 1      | 1    | 1   | 0     | 0.5   | 1    | 1     | 1     | 1        | 0.5     | 1   | 1      | 0    |
| Ice                   | 1      | 1        | 2      | 1      | 2      | 1    | 1   | 0     | 0.5   | 0.5  | 0.5   | 2     | 1        | 1       | 0.5 | 2      | 1    |
| Dragon                | 1      | 1        | 1      | 1      | 1      | 1    | 1   | 0     | 0.5   | 1    | 1     | 1     | 1        | 1       | 1   | 2      | 1    |
| Dark                  | 1      | 0.5      | 1      | 1      | 1      | 1    | 1   | 2     | 0.5   | 1    | 1     | 1     | 1        | 2       | 1   | 1      | 0.5  |

#### EXP

One a pokemon falls in battle, EXP is awarded to the other team's pokemon that participated in taking it down that have not fainted.

##### EXP calculation

EXP awarded is measured by the following formula:  
`(b * L)/7 * 1/s * e * a * t`
- b: Base EXP value for the fainted pokemon
- L: Level of the fainted pokemon
- s: How many ways the EXP is split (Multiple pokemon participated)
- e: If pokemon is holding a lucky egg, 1.5. otherwise, 1.0
- a: If versus a trainer, 1.5. wild, 1.0
- t: If the pokemon was traded

##### Growth speed

Pokemon exist in one of six EXP growth speeds, where n is the level of the pokemon _currently_.

1. Fast (4n^3)/5
2. Medium fast (n^3)
3. Fluctuating 
4. Erratic
5. Medium slow (6n^3)/5 -15n^2+100n-140
6. Slow (5n^3)/4

Erratic and Fluctuating have multi-part formulas as per below:

```
Erratic:
n < 50,         n^3(100-n)/50  
50 <= n < 68,   n^3(150-n)/100
68 <= n < 98,   n^3(1911-10n/3)/500
98 <= n < 100,  n^3(160-n)/100
```

```
Fluctuating:
n < 15,         n^3(n+1/3)+24/50  
15 <= n < 36,   n^3(n+14)/50
36 <= n < 100,  n^3((n/2)+32)/50
```

Example! Total EXP need for a Slow pokemon to reach level 58:  
(5*57)^3 / 4 =  5,787,281 EXP

##### Pokerus

After a battle, there's a chance for a pokemon to get Pokerus. Pokerus doubles EV gain for that pokemon permanently. There's an infectivity period, and after battle, the virus is likely to spread to other pokemon adjacent in the battle order. Once infected, the pokemone will permanently gain double EVs.

- Strain: 4 bit number
- Catch chance: 3/65535 per battle
- Immunity timer: 1-4 days, even distribution (strain mod 4 + 1)
- Transfer chance: 1/3 to adjacent pokemon in battle order
- At midnight, Immunity timer ticks down by one.

#### Shinies!

Shinyness is determined during creation.

The formula is `TrainerID XOR SecretID XOR Personailty value[31..16] XOR Personailty value [15..0]`
- TrainerID is a randomly assigned 16 bit value
- SecretID is... uh... Secret.
- Personality value is a random 32 bit number, split into top 16 bits and bottom 16 bits for the calculation

#### Breeding

When two pokemon are left at a nursery, they do the sex and you get an egg.

Well, it's slightly more complicated than that...

Every 256 steps, a chance for an egg to hatch occurs. The likelyhood is determined be a few factors:
- Egg group: Pokemon must share an Egg group 
- Gender: Mechanics work like real life mammals. Consider expanding.
- Can't both be in ditto group
- Can't be in unbreedable egg group
- Oval charm increases chances

Assuming the above mechanics are satisfied:
| Egg chance | Species | Original Trainer |
| ---------- | ------- | ---------------- |
| 70%        | Same      | Different      |
| 50%        | Same      | Same           |
| 50%        | Different | Different      |
| 20%        | Different | Same           |

Note: Bulbapedia (Source used for most numbers) does not actually list a value for both species and trainer being different. The way the website is laid out, it appears like it's supposed ot be visually linked with the slot above so that is how it is listed. 

##### Egg groups

Egg groups are nominally similar biologies. Fish can breed with other fish, Mammals can breed with other mammals.

There are special groups.

Pokemon can belong to one or two egg groups

| Group | Types of creatures |
| ----- | ------------------ |
| Mineral | Inorganic |
| Amorphous | Think slimes |
| Grass | Plantlike |
| Water 1 | Amphibians |
| Water 2 | Fish |
| Water 3 | Aquatic invertibrates (Octopi, squid) |
| Bug | Insects |
| Dragon | Reptilian/draconic |
| Flying | Birds |
| Field | Standard ground animals. Kangaroos and dogs |
| Human-like | Bipedal |
| Fairy | Petite and cute |
| Monster | Dinosaurs/Kaijulike |
| Ditto | Can breed with any other egg group |
| Unbreedable | Unable to procreate |

##### Eggs

After every 256 steps, the timer on the egg decreases. The initial value of the timer is specified by the pokemon species.

Eggs hatch at level 5, and know moves based on parentage and what they would already know at level 5.

#### Obediance

Pokemon of too high a level will start doing things they aren't commanded to if the player doesn't have the appropriate badges.

| Level | Required Badges |
| ----- | --------------- |
| X<20 | Badge 1 |
| 20 <= X < 30 | Badge 2 |
| 30 <= X < 40 | Badge 3 |
| 40 <= X < 50 | Badge 4 |
| 50 <= X < 60 | Badge 5 |
| 60 <= X < 70 | Badge 6 |
| 70 <= X < 80 | Badge 7 |
| 80 <= X < 100 | Badge 8 |

`DA = Pokemon Level + Obedience cap) * R / 256`
- R is random value[0..255]
If DA is greater than Obedience cap, pokemon disobeys

If disobedient, use the same formula to get action disobedient pokemon takes

If DA < Obedience Cap, uses a random move that wasn't specified by trainer. If false, generate rand[0..255]

If Rand[0..255] < (Pokemon Level - Obedience cap), Pokemon goes to sleep

Otherwise, if Rand[0..255] < 2 * (Pokemon Level - Obedience cap), Pokemon does confusion damage to itself

#### Moves 

Moves are acquired by leveling up, using a TM or HM, Inheritance from breeding, and move tutor.

Moves have the following properties:
- Type: What it's effective and ineffective against
- Category: Physical, Special, or Status. Determines some effects and stats to use
- PP: Number of times  amove can be used before returning to a pokemon center
- Power: Determines the damage output of the move
- Accuracy: How likely an attack s to hit.

### Player

- Pronouns          (He/She/They/free entry)
- Gender            (Male, Female, Nonbinary, free entry)
- Sprite options    (Masculine, Feminine, Androgynous, furry)
- Name              (Free entry)
- Trainer ID        (Random 16 bit value)
- Secret ID         (Random 16 bit value)

### Battles

Battles are one of the core gameplay pillars, and prossibly the most important one. Battles are between 2-4 humans, who each have a maximum of 6 pokemon that they can field at any time

#### Accuracy

Accuracy is is determined by the following formula:  
`If Rand[0..100] <= Move Accuracy * (Accuracy stage - Evasion Stage) * modifiers`
- Move accuracy is determined by the move being used \[1..100]
- Accuracy stage and Evasion stage inidicate a multiplier based on the temporary modificaiton. Max of +6 and min of -6. See [Stat Stages](#stat-stages)
- Modifiers such as weather, items, abilities etc.

##### Status moves

Self targeting status moves (Buffs, etc.) Do not need to roll for accuracy.

##### Exceptions

Some moves are auto hits. Accuracy formula can be subsittuted under special circumastances

#### Damage

Damage is a very long formula with a lot of variables:  
`DMG = (((2*L/5 + 2) * Power * A/D)/50 * Burn * Screen * Targets * Weather * FF + 2) * Stockpile * Crit * DblDmg * Charge * HH * STAB * Type1 * Type2 * Random`
- L: Pokemon's current level
- Power: Power of the move being used
- A: Attack (or Sp. Attack) stat of attacking pokemon
- D: Defense (or Sp. Defense) stat of defending pokemon
- Burn: 0.5 if defender is burned, move isn't guts, but is physical.
- Screen: 0.5 if using either relfect against physical attacks or Light screen against special attacks.
- Targets: In double battles, if a move hits two pokemon, 0.5. 1 otherwise. Moves that hit all pokemon also do 1.0, like earthquake.
- Weather: halves fire move in rain, doubles water type moves, reverse for Sunlight
- FF: If flash-fire triggered and is a fire type move, 1.5. Otherwise 1.0.
- Stockpile: If energy has been stockpiled, multiply by 2 or 3. Otherwise 1.
- Crit: 2 for a critical hit, 1 otherwise
- DblDmg: Specific moves trigger this if they do double damge. Example is doing earthquake while opponent is using dig
- Charge: 2 if the move is electric type and charge effect is active, 1.0 otherwise.
- HH: If helper in a douible battle has helping hand, 1.5. Otherwise, 1.0
- STAB: If the move's type matches either of the attacker's types, 1.5. Otherwise, 1.0
- Type1: Move's advantage or disadvantage versus the defenders's first type
- Type2: Move's advantage or disadvantage versus the defenders's second type
- Random: Gives some variablitiy. (Rand[0..15] + 85)/100

Note that a lot of these moves may not be implemented in Swadgimon. This can be seen as atemplate on how to add special damage effects.

#### Criticals

Criticals are based on stages, similar to stat stages below.

| Stage | Chance |
| ----- | ------ |
| 0 | 17/256 |
| 1 | 1/8 |
| 2 | 1/4 |
| 3 | 85/256 |
| 4+ | 1/2 |

Stages can be increased by holding certain items, using certain moves, etc.

#### Stat Stages

When a move or item increases or decreases a stat during battle, it changes the stage of that stat. Stages always reset when leaving battle.

For Attack, Defense, Sp. Attack, Sp. Defense and Speed:
| Stage | Modifier |
| ----- | -------- |
| +6 | 8/2 |
| +5 | 7/2 |
| +4 | 6/2 |
| +3 | 5/2 |
| +2 | 4/2 |
| +1 | 3/2 |
|  0 | 2/2 |
| -1 | 2/3 |
| -2 | 2/4 |
| -3 | 2/5 |
| -4 | 2/6 |
| -5 | 2/7 |
| -6 | 2/8 |

For Accuracy and evasion:
| Stage | Modifier |
| ----- | -------- |
| +6 | 300/100 |
| +5 | 266/100 |
| +4 | 250/100 |
| +3 | 200/100 |
| +2 | 166/100 |
| +1 | 133/100 |
|  0 | 100/100 |
| -1 |  75/100 |
| -2 |  60/100 |
| -3 |  50/100 |
| -4 |  43/100 |
| -5 |  36/100 |
| -6 |  33/100 |

#### Status Effects

Some moves casue status effects, or have a chance to cause a status effect. Non-Volitile statuses don't go away when the pokemon is switched out, Volitile do, and Transient statuses go away at the end of the turn.

Non-Volitile status are mutually exclusive. If one is already in effect, another cannot be gotten. NV status effects have badges assocated with them when viewing the Pokemon.

Non-Volitile
| Name | Shorthand | Effect |
| ---- | --------- | ------ |
| Burn | BRN | Inflicts 1/8th max HP per turn, physical move damage is halved. |
| Freeze | FRZ | Pokemon cannot use moves. Thaw chance is 20% per turn |
| Paralysis | PAR | Reduces Speed stat by 25%, 25% move failure chance. 
| Poison | PSN | Influcts 1/8th total HP each turn. Outside of battle, takes 1 ddmage every 4 steps. |
| Badly Poison | BPS | starts doing 1/16th max HP, adds 1/16th to damage each turn. Becomes regular poison once battle ends. |
| Sleep | SLP | Sleep stops  apokemon from using moves for a random amount of turns, from 1-7. Self inflicted sleep is always 2 turns. |

No status flag for Volitile statuses, and they are not necesassary mutually exclusive. Volitile status can exist alongside a single Non-Volitile status.

Volitile
| Name | Effect |
| ---- | ------ |
| Ability Change | Ability temporarily changes into another one |
| Ability Supression | A targeted move cannot be used while status is active | 
| Type Change | Pokemon's type changes temporarily |
| Mimic | Move is temporarily replaced by opponent's last used move |
| Substitute | User loses 1/4 of their HP to make a substitute that will take incoming attacks until it breaks. |
| Tranformed | Turns pokemon into target pokemon |
| Illusion | Appears as the last pokemon in the opponent's party. Cosmetic only |
| Bound | Target cannot switch of flee. 1/16th max HP per turn. Duration is 2-5 turns | 
| Curse | Takes damage equal to 1/4 max HP per turn |
| Nightmare | Only affect sleeping Pokemon. loses 1/4th max HP per turn |
| Perish Song | After three turns, Pokemon faints. |
| Seeded | Pokemon loses 1/16th max HP, attacker gains that HP back |
| Salt Cure | 1/8th Max HP per turn |
| Automize | Speed Stat goes up by two stages. Reduces weight |
| Identified | Evasion modifier will not affect next incoming attack |
| Minimized | Takes more damage from some moves |
| Tar Shot | Doubles effectiveness of fire type moves |
| Grounded | Removes immunity to ground type moves |
| Magnetic Levitation | Immune to ground type moves for five turns |
| Telekinesis | Immune to ground type moves for three turns |
| Aqua Ring | Restores 1/16th Max HP each turn |
| Rooting | Restors 1/16th Max HP per turn, but cannot flee or switch out | 
| Laser Focus | Until the end of next turn, moves will crit |
| Taking Aim | Accuracy of next damage dealing move is 100% | 
| Drowsy | Pokemone will fall asleep next turn |
| Charged | Damaged of next electric attack is doubled |
| Stockpile count | Can store energy up to three times. |
| Defense Curl | Doubles power of rollout and ice ball |
| Can't Escape | Can't switch out or flee |
| Octolock | Same as can't escape, but also lowers Defense and Sp. Defense by one stage |
| Disable | A move isn't able to be used for 2-5 turns. Last move the opponent used |
| Embargo | Held Item does not affect battle, items cannot be used on this pokemon |
| Heal block | Prevented from healing for a specified number of turns
| Imprison | Pokemon under effect of imprison locks any moves shared between imprisond pokemon and opponent. Other pokemon will be able to struggle if all moves are locked up. |
| Taunt | Cannot use non-damaging moves for 2-4 turns |
| Throat Chop | Cannot use sound based moves for 2 turns |
| Torment | Cannot use the same move twice in a row |
| Confusion | Will sometimes do a self damging attack |
| Infatuation | Cannot use moves 50% of the time. Will remain infatuated until casting pokemon is removed from the field |
| Getting Pumped | Increases crit chance by one stage |
| Guard Split | Averages user and target's Defense and Sp. Defense |
| Power Split | Averages user and target's Attack and Sp. Attack |
| Speed Swap | Switches user's Speed stat with target's |
| Power Trick | Swaps User's base attack and base Defense |
| Choice Lock | First move used after affected is the only move that can be used until switched out |
| Encore | Forces the use of the last move for 4-8 turns |
| Rampage | Forced to use move that starts rage for 2-3 turns, will be confused at the end |
| Rolling | Forced to use initiating move for 5 turns, doubling in power each hit |
| Making an Uproar | Forced to use calling move for 2-5 turns. No pokemon can sleep during |
| Bide | Cannot use a move for 2 turns. Will deal twice damage taken once effect ends |
| Recharging | Consequence of some moves. Cannot take actions |
| Charging Turn | Pokemon charges up an attack for a turn. Cannot attack. |
| Semi-Invulnerable turn | Changes accuracy calculation depending on situation. Includes Dig |

Transient
| Name | Effect |
| ---- | ------ |
| Flinch | Prevents pokemon from attacking this turn |
| Bracing | When bracing, Pokemon will survive with 1 HP |
| Center of attention | Forces other pokemon to attack this one |
| Magic Coat | Reflects most statuses back at the attacking pokemon |
| Protection | Immune to Physical, Special and/or Status moves for this turn |

See [this website](https://m.bulbapedia.bulbagarden.net/wiki/Status_condition) for more details

#### Escape

Depending on the battle, the player may choose to run away from a battle with a wild pokemon. Success is determined by the following formula:  
`If Player_speed > Wild_speed`
-or-
`If Rand[0..255] < ((Speed_player * 128/Speed_wild) + 30 * attemtps)`
- Speed_player is the speed of the player's pokemon
- Speed_wild is the speed of the wild pokemon
- Attempts is the number of attempts to escape have been made

#### Catching Wild Pokemon

If figthing a wild pokemon, the player can attempt to catch the pokemon. The capture attempt is run by the following formula:  
`X = (3 * MaxHP - 2 * CurrentHP)/3 * MaxHP * rate * Ball_Bonus * Status_Bonus`
- MaxHP: he full HP of the wild pokemon
- CurrentHP: The current value of the wild pokemone HP
- rate: Species based capture rate
- Ball_Bonus: Multiplier based on the ball used
- Status_Bonus: If the pokemon has a status condition, a bonus is applied based on condition.

If X is higher than 255, pokemon is automatically captured.

Otherwise, get a value from the folowing equation:  
`Y = 1048560/sqrt(sqrt(16711680/X))`  
The game then runs the following comparison four times:  
`Break out if Y >= rand[0..63353]`  
Ball wobbles each time the equation above is not met. On the fourth cycle, the pokemon is caught.

#### Fainting

If all your pokemon faint, you also pass out and return to the last pokemone center you visited. Some of your money is lost.

#### Arena

Arenas are the space where pokemon fight. They are blank voids with a 3/4th perpective on the pokemon battling.

##### Doubles

Double battles involve up to four pokemone at a time, two-on-two. Both pokemon can be controlled by one player on one side, or they can be indiependantly controlled.

##### Weather

Weather effects are battle modifiers that can occur naturally depending on location, or by some of the moves mons can use.

| Name | Description | Effects |
| ---- | ----------- | ------- |
| Harsh Sunlight | Sunbeams come from the sky | +50% fire move power, -50% water move power, Pokemone cannot be frozen |
| Rain | Raindrops fall from the sky | -50% fire move power, +50% water move power, |
| Sandstorm | Sand swirls around the screen | If ground, rock, or steel, +50% Special defense. Others take 1/16th max HP damage at the end of each turn unless mitigated by items or abilities |
| Hail | Thick white chunks of ice fall from the sky | If Ice type, +50% Special defense. Others take 1/16th max HP damage at the end of each turn unless mitigated by items or abilities |
| Strong winds | Leaves blow past | Electric, Ice and Rock type moves do neutral damage to Flying types |

### Multiplayer/Online/Event functionality

#### ID card

Players can set up an ID card so other players can see them and their teams.

#### Trading

Players can trade pokemon. Both players are given full information on the other pokemon and given chances to back out if they think it's unfavorable.

#### Battling

Players can battle each other by connecting their swadges together remotely and agrees to a battle. The battle functions as any other battle would, but has to fetch both players move sets and agree on the random values before executing a turn.

## Story

TODO

- Plot relevant NPCs
- Major story events
- Basic throughline
- Required items
- Any further details that can be scrounged up.

## Levels/Maps

An example level has been provided.

A .csv file can be found [here](Data files/Levels.csv), for more frequent updates

| Name | Area of the Real World | Expected levels | Monsters found | Gym | Special attactions | Num of entrances |
| ---- | ---------------------- | --------------- | -------------- | --- | ------------------ | ---------------- |
| Fountain | Fountain of Gaylord | 20-30 | 001, 003 | Water type gym | Fishing | 4 (Two doors leading outside, two doors leading from fountain into rest of hotel) |

## Trainers 

A list of trainers, including uniques. Example trainer is provided.

A .csv file can be found [here](Data files\Trainers.csv), for more frequent updates

| Name | Type | Sprite | Overworld Sprite | Pokemon | Money to be paid out | Battle entered quote | Battle lost Quote |
| ---- | ---- | ------ | ---------------- | ------- | -------------------- | -------------------- | ----------------- |
| Johnny Wycliffe | Cosplayer A | ![CospalyerASpr]() | ![CospalyerAOvrSpr]() | 001, LV 10 | 1000 | "I hope you like sandwiches!" | "Aw, my sandwich got crushed." | 

## Species

Sprites each need to have a shiny variant. An example mon, Bumblebutt, has been listed.

A .csv file can be found [here](Data files\Species.csv), for more frequent updates

| Index | Name | Catch Rate | Base EXP | EV Yield | Lvl Rate | Type 1 | Type 2 | Abilities | Gender | Gender spread | Height | Weight | Sprites (Facing) | Sprites (Back) | Sprites (Pokedex) | Cries | Egg Group 1 | Egg group 2 | Status Immunities |
| ----- | ---- | ---------- | -------- | -------- | -------- | ------ | ------ | --------- | ------ | ------------- | ------ | ------ | ---------------- | -------------- | ----------------- | ----- | ----------- | ----------- | ----------------- |
| 001 | Bumblebutt | 45 | 64 | +1 Speed | Medium Fast | Grass | Bug | Photosynthesis | Male/Female | 50/50 | 0.75m | 30kg | ![bbFaceing]() ![bbFaceingShiny]() | ![bbBack]() ![bbBackShiny]() | ![bbDex]() ![bbDexShiny]() | bbCry.mid | Scrambled | Benedict |

## Moves

A .csv file can be found [here](Data files\Moves.csv), for more frequent updates

| Index | Name | Type | Target | PP | Power | Accuracy method | Accuracy | TM/HM | Effects |
| ----- | ---- | ---- | ------ | -- | ----- | --------------- | -------- | ----- | ------- |

## Items

A pokeball is provided for reference

A .csv file can be found [here](Data files\Items.csv), for more frequent updates

| Index | Item | Effect | Storage | Pokemon can hold? | In-Battle | Overworld | Price |
| ----- | ---- | ------ | ------- | ----------------- | --------- | --------- | ----- |
| 0 | Pokeball | Catch modifier of 1.0 | Ball pouch | No | Yes | No | 200 |

## Abilities

A .csv file can be found [here](Data files\Abilities.csv), for more frequent updates

## Current Ideas

### Level design
- High level areas need to be gated off
    - Use ass kicking? Dark souls approach
    - Default Pokemon approach, blockl off paths until a story event is triggered
    - Warning popup when entering a difficult zone
- Tall grass analogue
    - Carpet, very plush
    - Crowds

### Trainer types
- Cosplayers A, B, C, D
- Fursuit dude
- Fursuit Gal
